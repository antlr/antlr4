[type]
Parser

[grammar]
grammar VisitorCalc;

s
    :	expr EOF
	|
	;

expr
@init {
   <BuildParseTrees()>
}
@after {
<ToJSON("$ctx"):writeln()>
}
	:	INT						# number
	|   ID                      # var
	|   ID '(' ')'              # func
	|	expr (MUL | DIV) expr	# multiply
	|	expr (ADD | SUB) expr	# add
	;

INT : [0-9]+;
ID  : [a-zA-Z_]+ ;
MUL : '*';
DIV : '/';
ADD : '+';
SUB : '-';
WS : [ \t]+ -> channel(HIDDEN);

[start]
expr

[input]
f(

[output]
{"rules":["s","expr"],
"input":"f(",
"tokens":[{"type":4,"line":1,"pos":0,"channel":0,"text":"f"}
,{"type":1,"line":1,"pos":1,"channel":0,"text":"("}
,{"type":-1,"line":1,"pos":2,"channel":0,"text":"<EOF>"}
],
"tree":{"1":[0,1,{"error":"<missing ')'>"}]}}

[errors]
"""line 1:2 missing ')' at '<EOF>'
"""